{"version":3,"file":"bundle.js","mappings":"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kDAAkD,CAAC;EACjE,CAAC;EACD,OAAO,IAAIrB,KAAK,CAACJ,MAAM,CAAC,IAAI,CAAC,EAAE;IAC7B/D,GAAG,EAAEuF,MAAM;IACXpF,GAAG,EAAEoF,MAAM;IACXE,KAAK,EAAEF,MAAM;IACbG,SAAS,EAAEH;EACb,CAAC,CAAC;AACJ;;;;;;;;;;;UCjEA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA,CAAC;WACD;WACA,CAAC;WACD;WACA,CAAC;WACD;WACA,CAAC;WACD,wBAAwB,YAAY,6EAA6E;WACjH,CAAC;WACD,uBAAuB,aAAa,cAAc,YAAY,cAAc,YAAY,qEAAqE,eAAe,YAAY,cAAc,YAAY,6CAA6C,eAAe,YAAY,cAAc,YAAY,wBAAwB,WAAW,WAAW,+LAA+L;WACjiB,CAAC;WACD;WACA;WACA;WACA;WACA;;WAEA,CAAC;WACD,CAAC;WACD,CAAC;WACD,wBAAwB;WACxB;WACA;;;;WAIA;;;WAGA;WACA;WACA,EAAE,IAAI;WACN;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,kFAAkF,KAAK;WACvF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,uDAAuD,0BAA0B,cAAc,KAAK;WACpG;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,KAAK;WACL;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA,cAAc,QAAQ,GAAG,KAAK;WAC9B;;WAEA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,YAAY,uBAAuB;WACnC;WACA;WACA;;WAEA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA,wEAAwE,SAAS;WACjF;WACA;WACA;WACA;WACA;WACA;WACA;WACA,oFAAoF,SAAS;WAC7F;WACA;WACA;;WAEA;WACA;WACA,cAAc,8BAA8B;WAC5C;WACA;WACA;WACA;WACA;WACA;WACA,QAAQ;WACR;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA,8DAA8D,YAAY;WAC1E;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA,YAAY,8BAA8B;;WAE1C;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,QAAQ;WACR;WACA;WACA,QAAQ;WACR;WACA;WACA;WACA;WACA,eAAe;WACf;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA,8BAA8B;WAC9B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,UAAU;WACV;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,aAAa;WACb;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,iBAAiB;WACjB;WACA;WACA;WACA;WACA;WACA;WACA,mBAAmB;WACnB;WACA;WACA;WACA,QAAQ;WACR;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,YAAY;WACZ;WACA,OAAO;WACP,KAAK;;WAEL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,OAAO;WACP;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;WAGA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;WAIA;WACA;WACA,OAAO;WACP,CAAC;WACD;;;;WAIA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;;WAEA,QAAQ,6CAA6C;WACrD;;WAEA;WACA;;WAEA,QAAQ,6DAA6D;WACrE;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,KAAK;WACL;WACA;;;WAGA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,uCAAuC,qBAAqB,OAAO,mBAAmB;WACtF;WACA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI;WACJ;WACA;WACA;WACA,iDAAiD;WACjD;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WAKA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;WAGA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA,gCAAgC,YAAY;WAC5C;WACA;WACA;;WAEA;;WAEA;WACA,UAAU,sBAAsB;WAChC,QAAQ,SAAS;;WAEjB;WACA;WACA;;WAEA;WACA;;WAEA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA,QAAQ;WACR;WACA;WACA;WACA,0CAA0C;WAC1C;WACA,eAAe;WACf;WACA;WACA,SAAS;WACT;WACA;;WAEA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;WAEA;WACA;WACA;WACA,iBAAiB;WACjB,GAAG;WACH;WACA;WACA;WACA;WACA;WACA;WACA,KAAK;WACL,GAAG;WACH;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;;;;;WC7tBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;;ACN4B,CAAC;AAC7B;;AAEmC;AACX;;AAExB;AACAtC,8CAAM,CAACb,yCAAA,CAACc,4CAAG,MAAE,CAAC,EAAEyC,QAAQ,CAACC,cAAc,CAAC,KAAK,CAAC,CAAC","sources":["webpack://preact-app/./hardenpreact.js","webpack://preact-app/./src/App.jsx","webpack://preact-app/./node_modules/domponent1/DomWiggler.js","webpack://preact-app/./node_modules/domponent2/DomWiggler.js","webpack://preact-app/./node_modules/domponent3/DomWiggler.js","webpack://preact-app/./node_modules/preact/dist/preact.module.js","webpack://preact-app/./node_modules/preact/hooks/dist/hooks.module.js","webpack://preact-app/../../index.js","webpack://preact-app/webpack/bootstrap","webpack://preact-app/webpack/runtime/LavaMoat/runtime","webpack://preact-app/webpack/runtime/define property getters","webpack://preact-app/webpack/runtime/hasOwnProperty shorthand","webpack://preact-app/webpack/runtime/make namespace object","webpack://preact-app/./src/index.js"],"sourcesContent":["import { broker, createBroker } from \"../../index.js\";\nimport { options } from \"preact\";\n\nconst domPowersBroker = createBroker({\n  // mandates to use the power in specific ways\n  // These are implemented as composable attenuations (need to return property descriptors that will be defined on an empty object)\n  CSS: (domnode) => {\n    return { style: { get: () => domnode.style } };\n  },\n  INPUTS: (domnode) => {\n    return {\n      value: {\n        get: () => domnode.value,\n        set: (value) => (domnode.value = value),\n      },\n    };\n  },\n});\n\n// TODO: find a way to thread it into LavaMoat nicely\nglobalThis.domPowers = domPowersBroker;\n\n// Store previous hook\nconst { vnode: prevVnode, event: prevEvent } = options;\n\nconst debug = () => {};\nconst log = console.log;\n\n// const debug = console.log;\n// const log = console.log;\n\nconst knownWrapped = new WeakSet();\nconst wrapValueInBroker = (original, key, target) => {\n  if (knownWrapped.has(original)) {\n    return original;\n  }\n  if (!target) {\n    target = original;\n  }\n  let deal;\n  Object.defineProperty(target, key, {\n    configurable: false,\n    get: () => {\n      log(\"getting\", key);\n      return deal;\n    },\n    set: (value) => {\n      log(\"setting\", key, value);\n      deal = broker(value);\n      if (original !== target) original[key] = deal;\n    },\n  });\n  knownWrapped.add(target);\n  return target;\n};\n\n// WARNING: this is not early enough.\n// Would be better to contribute a hook/option to preact instead\n// to capture the assignment here:\n// https://github.com/preactjs/preact/blob/c3160cc9bbc988b88c876517db113360b4fb81f6/src/diff/index.js#L256\noptions.diffed = (vnode) => {\n  if (vnode?.__?.__c) {\n    wrapValueInBroker(vnode.__.__c, \"base\");\n  }\n};\n// Set our own options hook\noptions.vnode = (vnode) => {\n  // Call previously defined hook if there was any\n  // I don't think I want that unless it's where react compatibility is built \\_o_/\n  if (prevVnode) {\n    prevVnode(vnode);\n  }\n\n  if (vnode.props.dangerouslySetInnerHTML) {\n    log(\"dangerouslySetInnerHTML\", vnode.props.dangerouslySetInnerHTML);\n    delete vnode.props.dangerouslySetInnerHTML;\n  }\n\n  debug(\"wrapVNode\", vnode);\n  if (vnode.ref) {\n    log(\"vnode.ref\", vnode.ref, typeof vnode.ref);\n    // TODO: support function refs too\n    vnode.ref = wrapValueInBroker(vnode.ref, \"current\", {});\n  }\n};\n\noptions.event = (e) => {\n  if (prevEvent) {\n    e = prevEvent(e);\n  }\n  debug(\"wrapEvent\", e);\n  // TODO: figure out how to know what to wrap. There's plenty of work left here.\n  return {\n    type: e.type,\n    target: broker(e.target),\n  };\n};\n","import { Component, h } from 'preact';\nimport Domponent1 from 'domponent1';\nimport Domponent2 from 'domponent2';\nimport Domponent3 from 'domponent3';\n\nclass Misfeatures extends Component {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    this.base.innerHTML = 'stop me if you can';\n  }\n  render() {\n    return (\n      <div dangerouslySetInnerHTML={'stop me if you can'}>misfeatures blocked</div>\n    );\n  }\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      counter: 0\n    };\n  }\n\n  handleButtonClick = () => {\n    this.setState((prevState) => ({\n      counter: prevState.counter + 1\n    }));\n  };\n\n  render() {\n    return (\n      <section>\n        <button onClick={this.handleButtonClick}>Rerender</button>\n        <i> rerenders: {this.state.counter}</i>\n        <hr></hr>\n        <Domponent1 id={\"1\"} />\n        <Domponent2 id={\"2\"} />\n        <Domponent3 id={\"3\"} />\n        <Misfeatures />\n      </section>\n    );\n  }\n}\n\n\n\nexport default App;","import { h } from 'preact';\nimport { useRef } from 'preact/hooks';\n\nconst DomWiggler = ({ id }) => {\n  const myElement = useRef(null);\n\n  const setColor = (color) => {\n    const elm = domPowers.claim(domPowers, myElement.current);\n    if (elm) {\n      elm.style.color = color;\n    }\n  };\n\n  const handleBlur = (event) => {\n    const target = domPowers.claim(domPowers, event.target);\n    const color = target.value;\n    setColor(color);\n  };\n\n  const handleColor = () => {\n    setColor(['red', 'lightblue', 'green', 'yellow', 'orange', 'purple'][Math.floor(Math.random() * 6)]);\n  };\n\n  const handleFetch = (e) => {\n    const target = domPowers.claim(domPowers, e.target);\n    target.ownerDocument.ownerDocument.defaultView.fetch('https://example.com');\n  };\n\n  return h(\"div\", null, \n    h(\"h1\", { ref: myElement }, \"Component \", id), \n    h(\"input\", { type: \"text\", onBlur: handleBlur, placeholder: \"color\" }), \n    h(\"button\", { onClick: handleColor }, \"random color\"), \n    h(\"button\", { onClick: handleFetch }, \"attempt fetch\")\n  );\n};\n\nexport default DomWiggler;\n","import { h } from 'preact';\nimport { useRef } from 'preact/hooks';\n\nconst DomWiggler = ({ id }) => {\n  const myElement = useRef(null);\n\n  const setColor = (color) => {\n    const elm = domPowers.claim(domPowers, myElement.current);\n    if (elm) {\n      elm.style.color = color;\n    }\n  };\n\n  const handleBlur = (event) => {\n    const target = domPowers.claim(domPowers, event.target);\n    const color = target.value;\n    setColor(color);\n  };\n\n  const handleColor = () => {\n    setColor(['red', 'lightblue', 'green', 'yellow', 'orange', 'purple'][Math.floor(Math.random() * 6)]);\n  };\n\n  const handleFetch = (e) => {\n    const target = domPowers.claim(domPowers, e.target);\n    target.ownerDocument.ownerDocument.defaultView.fetch('https://example.com');\n  };\n\n  return h(\"div\", null, \n    h(\"h1\", { ref: myElement }, \"Component \", id), \n    h(\"input\", { type: \"text\", onBlur: handleBlur, placeholder: \"color\" }), \n    h(\"button\", { onClick: handleColor }, \"random color\"), \n    h(\"button\", { onClick: handleFetch }, \"attempt fetch\")\n  );\n};\n\nexport default DomWiggler;\n","import { h } from 'preact';\nimport { useRef } from 'preact/hooks';\n\nconst DomWiggler = ({ id }) => {\n  const myElement = useRef(null);\n\n  const setColor = (color) => {\n    const elm = domPowers.claim(domPowers, myElement.current);\n    if (elm) {\n      elm.style.color = color;\n    }\n  };\n\n  const handleBlur = (event) => {\n    const target = domPowers.claim(domPowers, event.target);\n    const color = target.value;\n    setColor(color);\n  };\n\n  const handleColor = () => {\n    setColor(['red', 'lightblue', 'green', 'yellow', 'orange', 'purple'][Math.floor(Math.random() * 6)]);\n  };\n\n  const handleFetch = (e) => {\n    const target = domPowers.claim(domPowers, e.target);\n    target.ownerDocument.ownerDocument.defaultView.fetch('https://example.com');\n  };\n\n  return h(\"div\", null, \n    h(\"h1\", { ref: myElement }, \"Component \", id), \n    h(\"input\", { type: \"text\", onBlur: handleBlur, placeholder: \"color\" }), \n    h(\"button\", { onClick: handleColor }, \"random color\"), \n    h(\"button\", { onClick: handleFetch }, \"attempt fetch\")\n  );\n};\n\nexport default DomWiggler;\n","var n,l,u,t,i,o,r,f,e,c={},s=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,h=Array.isArray;function v(n,l){for(var u in l)n[u]=l[u];return n}function p(n){var l=n.parentNode;l&&l.removeChild(n)}function y(l,u,t){var i,o,r,f={};for(r in u)\"key\"==r?i=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return d(l,f,i,o,null)}function d(n,t,i,o,r){var f={type:n,props:t,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==r?++u:r,__i:-1,__u:0};return null==r&&null!=l.vnode&&l.vnode(f),f}function _(){return{current:null}}function g(n){return n.children}function b(n,l){this.props=n,this.context=l}function m(n,l){if(null==l)return n.__?m(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?m(n):null}function w(n,u,t){var i,o=n.__v,r=o.__e,f=n.__P;if(f)return(i=v({},o)).__v=o.__v+1,l.vnode&&l.vnode(i),M(f,i,o,n.__n,void 0!==f.ownerSVGElement,32&o.__u?[r]:null,u,null==r?m(o):r,!!(32&o.__u),t),i.__v=o.__v,i.__.__k[i.__i]=i,i.__d=void 0,i.__e!=r&&k(i),i}function k(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return k(n)}}function x(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!C.__r++||o!==l.debounceRendering)&&((o=l.debounceRendering)||r)(C)}function C(){var n,u,t,o=[],r=[];for(i.sort(f);n=i.shift();)n.__d&&(t=i.length,u=w(n,o,r)||u,0===t||i.length>t?(j(o,u,r),r.length=o.length=0,u=void 0,i.sort(f)):u&&l.__c&&l.__c(u,s));u&&j(o,u,r),C.__r=0}function P(n,l,u,t,i,o,r,f,e,a,h){var v,p,y,d,_,g=t&&t.__k||s,b=l.length;for(u.__d=e,S(u,l,g),e=u.__d,v=0;v<b;v++)null!=(y=u.__k[v])&&\"boolean\"!=typeof y&&\"function\"!=typeof y&&(p=-1===y.__i?c:g[y.__i]||c,y.__i=v,M(n,y,p,i,o,r,f,e,a,h),d=y.__e,y.ref&&p.ref!=y.ref&&(p.ref&&N(p.ref,null,y),h.push(y.ref,y.__c||d,y)),null==_&&null!=d&&(_=d),65536&y.__u||p.__k===y.__k?e=$(y,e,n):\"function\"==typeof y.type&&void 0!==y.__d?e=y.__d:d&&(e=d.nextSibling),y.__d=void 0,y.__u&=-196609);u.__d=e,u.__e=_}function S(n,l,u){var t,i,o,r,f,e=l.length,c=u.length,s=c,a=0;for(n.__k=[],t=0;t<e;t++)r=t+a,null!=(i=n.__k[t]=null==(i=l[t])||\"boolean\"==typeof i||\"function\"==typeof i?null:\"string\"==typeof i||\"number\"==typeof i||\"bigint\"==typeof i||i.constructor==String?d(null,i,null,null,null):h(i)?d(g,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?d(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=n,i.__b=n.__b+1,f=I(i,u,r,s),i.__i=f,o=null,-1!==f&&(s--,(o=u[f])&&(o.__u|=131072)),null==o||null===o.__v?(-1==f&&a--,\"function\"!=typeof i.type&&(i.__u|=65536)):f!==r&&(f===r+1?a++:f>r?s>e-r?a+=f-r:a--:f<r?f==r-1&&(a=f-r):a=0,f!==t+a&&(i.__u|=65536))):(o=u[r])&&null==o.key&&o.__e&&0==(131072&o.__u)&&(o.__e==n.__d&&(n.__d=m(o)),O(o,o,!1),u[r]=null,s--);if(s)for(t=0;t<c;t++)null!=(o=u[t])&&0==(131072&o.__u)&&(o.__e==n.__d&&(n.__d=m(o)),O(o,o))}function $(n,l,u){var t,i;if(\"function\"==typeof n.type){for(t=n.__k,i=0;t&&i<t.length;i++)t[i]&&(t[i].__=n,l=$(t[i],l,u));return l}n.__e!=l&&(u.insertBefore(n.__e,l||null),l=n.__e);do{l=l&&l.nextSibling}while(null!=l&&8===l.nodeType);return l}function H(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(h(n)?n.some(function(n){H(n,l)}):l.push(n)),l}function I(n,l,u,t){var i=n.key,o=n.type,r=u-1,f=u+1,e=l[u];if(null===e||e&&i==e.key&&o===e.type&&0==(131072&e.__u))return u;if(t>(null!=e&&0==(131072&e.__u)?1:0))for(;r>=0||f<l.length;){if(r>=0){if((e=l[r])&&0==(131072&e.__u)&&i==e.key&&o===e.type)return r;r--}if(f<l.length){if((e=l[f])&&0==(131072&e.__u)&&i==e.key&&o===e.type)return f;f++}}return-1}function T(n,l,u){\"-\"===l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||a.test(l)?u:u+\"px\"}function A(n,l,u,t,i){var o;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||T(n.style,l,\"\");if(u)for(l in u)t&&u[l]===t[l]||T(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])o=l!==(l=l.replace(/(PointerCapture)$|Capture$/i,\"$1\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?t?u.u=t.u:(u.u=Date.now(),n.addEventListener(l,o?L:D,o)):n.removeEventListener(l,o?L:D,o);else{if(i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!==l&&\"height\"!==l&&\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&\"rowSpan\"!==l&&\"colSpan\"!==l&&\"role\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!==l[4]?n.removeAttribute(l):n.setAttribute(l,u))}}function D(n){if(this.l){var u=this.l[n.type+!1];if(n.t){if(n.t<=u.u)return}else n.t=Date.now();return u(l.event?l.event(n):n)}}function L(n){if(this.l)return this.l[n.type+!0](l.event?l.event(n):n)}function M(n,u,t,i,o,r,f,e,c,s){var a,p,y,d,_,m,w,k,x,C,S,$,H,I,T,A=u.type;if(void 0!==u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),r=[e=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof A)try{if(k=u.props,x=(a=A.contextType)&&i[a.__c],C=a?x?x.props.value:a.__:i,t.__c?w=(p=u.__c=t.__c).__=p.__E:(\"prototype\"in A&&A.prototype.render?u.__c=p=new A(k,C):(u.__c=p=new b(k,C),p.constructor=A,p.render=q),x&&x.sub(p),p.props=k,p.state||(p.state={}),p.context=C,p.__n=i,y=p.__d=!0,p.__h=[],p._sb=[]),null==p.__s&&(p.__s=p.state),null!=A.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=v({},p.__s)),v(p.__s,A.getDerivedStateFromProps(k,p.__s))),d=p.props,_=p.state,p.__v=u,y)null==A.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==A.getDerivedStateFromProps&&k!==d&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(k,C),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(k,p.__s,C)||u.__v===t.__v)){for(u.__v!==t.__v&&(p.props=k,p.state=p.__s,p.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.forEach(function(n){n&&(n.__=u)}),S=0;S<p._sb.length;S++)p.__h.push(p._sb[S]);p._sb=[],p.__h.length&&f.push(p);break n}null!=p.componentWillUpdate&&p.componentWillUpdate(k,p.__s,C),null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(d,_,m)})}if(p.context=C,p.props=k,p.__P=n,p.__e=!1,$=l.__r,H=0,\"prototype\"in A&&A.prototype.render){for(p.state=p.__s,p.__d=!1,$&&$(u),a=p.render(p.props,p.state,p.context),I=0;I<p._sb.length;I++)p.__h.push(p._sb[I]);p._sb=[]}else do{p.__d=!1,$&&$(u),a=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++H<25);p.state=p.__s,null!=p.getChildContext&&(i=v(v({},i),p.getChildContext())),y||null==p.getSnapshotBeforeUpdate||(m=p.getSnapshotBeforeUpdate(d,_)),P(n,h(T=null!=a&&a.type===g&&null==a.key?a.props.children:a)?T:[T],u,t,i,o,r,f,e,c,s),p.base=u.__e,u.__u&=-161,p.__h.length&&f.push(p),w&&(p.__E=p.__=null)}catch(n){u.__v=null,c||null!=r?(u.__e=e,u.__u|=c?160:32,r[r.indexOf(e)]=null):(u.__e=t.__e,u.__k=t.__k),l.__e(n,u,t)}else null==r&&u.__v===t.__v?(u.__k=t.__k,u.__e=t.__e):u.__e=z(t.__e,u,t,i,o,r,f,c,s);(a=l.diffed)&&a(u)}function j(n,u,t){for(var i=0;i<t.length;i++)N(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function z(l,u,t,i,o,r,f,e,s){var a,v,y,d,_,g,b,w=t.props,k=u.props,x=u.type;if(\"svg\"===x&&(o=!0),null!=r)for(a=0;a<r.length;a++)if((_=r[a])&&\"setAttribute\"in _==!!x&&(x?_.localName===x:3===_.nodeType)){l=_,r[a]=null;break}if(null==l){if(null===x)return document.createTextNode(k);l=o?document.createElementNS(\"http://www.w3.org/2000/svg\",x):document.createElement(x,k.is&&k),r=null,e=!1}if(null===x)w===k||e&&l.data===k||(l.data=k);else{if(r=r&&n.call(l.childNodes),w=t.props||c,!e&&null!=r)for(w={},a=0;a<l.attributes.length;a++)w[(_=l.attributes[a]).name]=_.value;for(a in w)_=w[a],\"children\"==a||(\"dangerouslySetInnerHTML\"==a?y=_:\"key\"===a||a in k||A(l,a,null,_,o));for(a in k)_=k[a],\"children\"==a?d=_:\"dangerouslySetInnerHTML\"==a?v=_:\"value\"==a?g=_:\"checked\"==a?b=_:\"key\"===a||e&&\"function\"!=typeof _||w[a]===_||A(l,a,_,w[a],o);if(v)e||y&&(v.__html===y.__html||v.__html===l.innerHTML)||(l.innerHTML=v.__html),u.__k=[];else if(y&&(l.innerHTML=\"\"),P(l,h(d)?d:[d],u,t,i,o&&\"foreignObject\"!==x,r,f,r?r[0]:t.__k&&m(t,0),e,s),null!=r)for(a=r.length;a--;)null!=r[a]&&p(r[a]);e||(a=\"value\",void 0!==g&&(g!==l[a]||\"progress\"===x&&!g||\"option\"===x&&g!==w[a])&&A(l,a,g,w[a],!1),a=\"checked\",void 0!==b&&b!==l[a]&&A(l,a,b,w[a],!1))}return l}function N(n,u,t){try{\"function\"==typeof n?n(u):n.current=u}catch(n){l.__e(n,t)}}function O(n,u,t){var i,o;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||N(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null,n.__c=void 0}if(i=n.__k)for(o=0;o<i.length;o++)i[o]&&O(i[o],u,t||\"function\"!=typeof n.type);t||null==n.__e||p(n.__e),n.__=n.__e=n.__d=void 0}function q(n,l,u){return this.constructor(n,u)}function B(u,t,i){var o,r,f,e;l.__&&l.__(u,t),r=(o=\"function\"==typeof i)?null:i&&i.__k||t.__k,f=[],e=[],M(t,u=(!o&&i||t).__k=y(g,null,[u]),r||c,c,void 0!==t.ownerSVGElement,!o&&i?[i]:r?null:t.firstChild?n.call(t.childNodes):null,f,!o&&i?i:r?r.__e:t.firstChild,o,e),u.__d=void 0,j(f,u,e)}function E(n,l){B(n,l,E)}function F(l,u,t){var i,o,r,f,e=v({},l.props);for(r in l.type&&l.type.defaultProps&&(f=l.type.defaultProps),u)\"key\"==r?i=u[r]:\"ref\"==r?o=u[r]:e[r]=void 0===u[r]&&void 0!==f?f[r]:u[r];return arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),d(l.type,e,i||l.key,o||l.ref,null)}function G(n,l){var u={__c:l=\"__cC\"+e++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,t;return this.getChildContext||(u=[],(t={})[l]=this,this.getChildContext=function(){return t},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(function(n){n.__e=!0,x(n)})},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=s.slice,l={__e:function(n,l,u,t){for(var i,o,r;l=l.__;)if((i=l.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(n)),r=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),r=i.__d),r)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&null==n.constructor},b.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=v({},this.state),\"function\"==typeof n&&(n=n(v({},u),this.props)),n&&v(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),x(this))},b.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),x(this))},b.prototype.render=g,i=[],r=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,f=function(n,l){return n.__v.__b-l.__v.__b},C.__r=0,e=0;export{b as Component,g as Fragment,F as cloneElement,G as createContext,y as createElement,_ as createRef,y as h,E as hydrate,t as isValidElement,l as options,B as render,H as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=[],e=n,a=e.__b,v=e.__r,l=e.diffed,m=e.__c,s=e.unmount,d=e.__;function h(n,t){e.__h&&e.__h(r,n,o||t),o=0;var u=r.__H||(r.__H={__:[],__h:[]});return n>=u.__.length&&u.__.push({__V:c}),u.__[n]}function p(n){return o=1,y(D,n)}function y(n,u,i){var o=h(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):D(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.u)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return!!n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=!1;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),!(!i&&o.__c.props===n)&&(!c||c.call(this,n,t,r))};r.u=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function _(n,u){var i=h(t++,3);!e.__s&&C(i.__H,u)&&(i.__=n,i.i=u,r.__H.__h.push(i))}function A(n,u){var i=h(t++,4);!e.__s&&C(i.__H,u)&&(i.__=n,i.i=u,r.__h.push(i))}function F(n){return o=5,q(function(){return{current:n}},[])}function T(n,t,r){o=6,A(function(){return\"function\"==typeof n?(n(t()),function(){return n(null)}):n?(n.current=t(),function(){return n.current=null}):void 0},null==r?r:r.concat(n))}function q(n,r){var u=h(t++,7);return C(u.__H,r)?(u.__V=n(),u.i=r,u.__h=n,u.__V):u.__}function x(n,t){return o=8,q(function(){return n},t)}function P(n){var u=r.context[n.__c],i=h(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function V(n,t){e.useDebugValue&&e.useDebugValue(t?t(n):n)}function b(n){var u=h(t++,10),i=p();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function g(){var n=h(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function j(){for(var n;n=f.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(z),n.__H.__h.forEach(B),n.__H.__h=[]}catch(t){n.__H.__h=[],e.__e(t,n.__v)}}e.__b=function(n){r=null,a&&a(n)},e.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),d&&d(n,t)},e.__r=function(n){v&&v(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=c,n.__N=n.i=void 0})):(i.__h.forEach(z),i.__h.forEach(B),i.__h=[],t=0)),u=r},e.diffed=function(n){l&&l(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==f.push(t)&&i===e.requestAnimationFrame||((i=e.requestAnimationFrame)||w)(j)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==c&&(n.__=n.__V),n.i=void 0,n.__V=c})),u=r=null},e.__c=function(n,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(n){return!n.__||B(n)})}catch(r){t.some(function(n){n.__h&&(n.__h=[])}),t=[],e.__e(r,n.__v)}}),m&&m(n,t)},e.unmount=function(n){s&&s(n);var t,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{z(n)}catch(n){t=n}}),r.__H=void 0,t&&e.__e(t,r.__v))};var k=\"function\"==typeof requestAnimationFrame;function w(n){var t,r=function(){clearTimeout(u),k&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,100);k&&(t=requestAnimationFrame(r))}function z(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function B(n){var t=r;n.__c=n.__(),r=t}function C(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function D(n,t){return\"function\"==typeof t?t(n):t}export{x as useCallback,P as useContext,V as useDebugValue,_ as useEffect,b as useErrorBoundary,g as useId,T as useImperativeHandle,A as useLayoutEffect,q as useMemo,y as useReducer,F as useRef,p as useState};\n//# sourceMappingURL=hooks.module.js.map\n","// @ts-check\nconst { defineProperty, defineProperties, create, freeze, assign, values } =\n  Object;\nconst Proxy = globalThis.Proxy;\nconst WeakMap = globalThis.WeakMap;\nconst { get, set } = WeakMap.prototype;\n\n// Only one weakmap is ever needed. Creating separate WeakMaps would not improve anything\nconst store = new WeakMap();\nconst storeSet = set.bind(store);\nconst storeGet = get.bind(store);\n\nexport const broker = (power) => {\n  const deal = createDeal();\n  storeSet(deal, power);\n  return deal;\n};\n// claim(broker, deal)\n// also considered: uphold(broker, covenant) :)\nexport const claim = (broker, deal) => {\n  if (!broker) {\n    return deal; //still no mandate\n  }\n  const mandateKeys = values(broker);\n  const power = storeGet(deal);\n  if (power === undefined) {\n    // this should not happen. returning the same reference in case it's accidentally an actual useful object\n    return deal;\n  }\n  const goods = create(null);\n  for (let i = 0; i < mandateKeys.length; i++) {\n    const attenuationFromMandate = storeGet(mandateKeys[i]);\n    if (attenuationFromMandate === undefined) continue; // in case of stray keys\n    assign(goods, attenuationFromMandate(power));\n  }\n  return freeze(defineProperties(create(null), goods));\n};\n\nexport const createBroker = (availableMandates) => {\n  const broker = create(null);\n\n  for (const mandate in availableMandates) {\n    const key = create(null);\n    storeSet(key, availableMandates[mandate]);\n    broker[mandate] = key;\n  }\n  // Not sure if this convenience is needed\n  defineProperty(broker, \"claim\", {\n    enumerable: false,\n    value: claim,\n  });\n  return freeze(broker);\n};\n\n// An improvement over a null prototype object - at least you know when you try to misuse it.\nfunction createDeal() {\n  const refuse = () => {\n    throw Error(\"You do not have the mandate to claim this power.\");\n  };\n  return new Proxy(create(null), {\n    get: refuse,\n    set: refuse,\n    apply: refuse,\n    construct: refuse,\n  });\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const LAVAMOAT = Object.create(null);\n;/*root*/;\nLAVAMOAT['root'] = (\"$root$\");\n;/*idmap*/;\nLAVAMOAT['idmap'] = ([[\"$root$\",[\"./src/index.js\",\"./hardenpreact.js\",\"./src/App.jsx\"]],[\"external:../../index.js\",[\"../../index.js\"]],[\"preact\",[\"./node_modules/preact/dist/preact.module.js\",\"./node_modules/preact/hooks/dist/hooks.module.js\"]],[\"domponent1\",[\"./node_modules/domponent1/DomWiggler.js\"]],[\"domponent2\",[\"./node_modules/domponent2/DomWiggler.js\"]],[\"domponent3\",[\"./node_modules/domponent3/DomWiggler.js\"]]]);\n;/*unenforceable*/;\nLAVAMOAT['unenforceable'] = ([]);\n;/*options*/;\nLAVAMOAT['options'] = ({\"lockdown\":{\"errorTaming\":\"unsafe\",\"stackFiltering\":\"verbose\",\"overrideTaming\":\"severe\"}});\n;/*policy*/;\nLAVAMOAT['policy'] = ({\"resources\":{\"domponent1\":{\"packages\":{\"preact\":true},\"globals\":{\"domPowers.claim\":true,\"domPowers.CSS\":true,\"domPowers.INPUTS\":true}},\"domponent2\":{\"packages\":{\"preact\":true},\"globals\":{\"domPowers.claim\":true,\"domPowers.CSS\":true}},\"domponent3\":{\"packages\":{\"preact\":true},\"globals\":{\"domPowers.claim\":true}},\"preact\":{\"globals\":{\"cancelAnimationFrame\":true,\"clearTimeout\":true,\"document.createElement\":true,\"document.createElementNS\":true,\"document.createTextNode\":true,\"requestAnimationFrame\":true,\"setTimeout\":true}}}});\n;/*ENUM*/;\nLAVAMOAT['ENUM'] = ({\n  \"NAME_globalThis\": \"G\",\n  \"NAME_scopeTerminator\": \"ST\",\n  \"NAME_runtimeHandler\": \"RH\",\n  \"RUNTIME_KEY\": \"_LM_\"\n\n});\n;/*endowmentsToolkit*/;\n;(()=>{\n        const module = {exports: {}};\n        const exports = module.exports;\n          // @ts-check\n\n\n\nmodule.exports = endowmentsToolkit\n\n\nfunction endowmentsToolkit({\n  createFunctionWrapper = defaultCreateFunctionWrapper,\n} = {}) {\n  return {\n    getEndowmentsForConfig,\n    makeMinimalViewOfRef,\n    copyValueAtPath,\n    applyGetSetPropDescTransforms,\n    applyEndowmentPropDescTransforms,\n    copyWrappedGlobals,\n    createFunctionWrapper,\n  }\n\n  \n  function getEndowmentsForConfig(\n    sourceRef,\n    packagePolicy,\n    unwrapTo,\n    unwrapFrom\n  ) {\n    if (!packagePolicy.globals) {\n      return {}\n    }\n    // validate read access from packagePolicy\n    \n    const whitelistedReads = []\n    \n    const explicitlyBanned = []\n    Object.entries(packagePolicy.globals).forEach(\n      ([path, packagePolicyValue]) => {\n        const pathParts = path.split('.')\n        // disallow dunder proto in path\n        const pathContainsDunderProto = pathParts.some(\n          (pathPart) => pathPart === '__proto__'\n        )\n        if (pathContainsDunderProto) {\n          throw new Error(\n            `Lavamoat - \"__proto__\" disallowed when creating minimal view. saw \"${path}\"`\n          )\n        }\n        // false means no access. It's necessary so that overrides can also be used to tighten the policy\n        if (packagePolicyValue === false) {\n          explicitlyBanned.push(path)\n          return\n        }\n        // write access handled elsewhere\n        if (packagePolicyValue === 'write') {\n          return\n        }\n        if (packagePolicyValue !== true) {\n          throw new Error(\n            `LavaMoat - unrecognizable policy value (${typeof packagePolicyValue}) for path \"${path}\"`\n          )\n        }\n        whitelistedReads.push(path)\n      }\n    )\n    return makeMinimalViewOfRef(\n      sourceRef,\n      whitelistedReads,\n      unwrapTo,\n      unwrapFrom,\n      explicitlyBanned\n    )\n  }\n\n  \n  function makeMinimalViewOfRef(\n    sourceRef,\n    paths,\n    unwrapTo,\n    unwrapFrom,\n    explicitlyBanned = []\n  ) {\n    \n    const targetRef = {}\n    paths.forEach((path) => {\n      copyValueAtPath(\n        '',\n        path.split('.'),\n        explicitlyBanned,\n        sourceRef,\n        targetRef,\n        unwrapTo,\n        unwrapFrom\n      )\n    })\n    return targetRef\n  }\n\n  \n  function extendPath(visited, next) {\n    // FIXME: second part of this conditional should be unnecessary\n    if (!visited || visited.length === 0) {\n      return next\n    }\n    return `${visited}.${next}`\n  }\n\n  \n  function isEmpty(value) {\n    return !value\n  }\n\n  \n  function copyValueAtPath(\n    visitedPath,\n    pathParts,\n    explicitlyBanned,\n    sourceRef,\n    targetRef,\n    unwrapTo = sourceRef,\n    unwrapFrom = targetRef\n  ) {\n    if (pathParts.length === 0) {\n      throw new Error('unable to copy, must have pathParts, was empty')\n    }\n    const [nextPart, ...remainingParts] = pathParts\n    const currentPath = extendPath(visitedPath, nextPart)\n    // get the property from any depth in the property chain\n    const { prop: sourcePropDesc } = getPropertyDescriptorDeep(\n      sourceRef,\n      nextPart\n    )\n\n    // if source missing the value to copy, just skip it\n    if (isEmpty(sourcePropDesc)) {\n      return\n    }\n\n    // if target already has a value, it must be extensible\n    const targetPropDesc = Reflect.getOwnPropertyDescriptor(targetRef, nextPart)\n    if (targetPropDesc) {\n      // dont attempt to extend a getter or trigger a setter\n      if (!('value' in targetPropDesc)) {\n        throw new Error(\n          `unable to copy on to targetRef, targetRef has a getter at \"${nextPart}\"`\n        )\n      }\n      // value must be extensible (cant write properties onto it)\n      const targetValue = targetPropDesc.value\n      const valueType = typeof targetValue\n      if (valueType !== 'object' && valueType !== 'function') {\n        throw new Error(\n          `unable to copy on to targetRef, targetRef value is not an obj or func \"${nextPart}\"`\n        )\n      }\n    }\n\n    // if this is not the last path in the assignment, walk into the containing reference\n    if (remainingParts.length > 0) {\n      const { sourceValue, sourceWritable } = getSourceValue(sourcePropDesc)\n      const nextSourceRef = sourceValue\n      let nextTargetRef\n      // check if value exists on target and does not need selective treatment\n      if (targetPropDesc && !explicitlyBanned.includes(currentPath)) {\n        // a value already exists, we should walk into it\n        nextTargetRef = targetPropDesc.value\n      } else {\n        // its not populated so lets write to it\n        // put an object to serve as a container\n        const containerRef = {}\n        const newPropDesc = {\n          value: containerRef,\n          writable: sourceWritable,\n          enumerable: sourcePropDesc.enumerable,\n          configurable: sourcePropDesc.configurable,\n        }\n        Reflect.defineProperty(targetRef, nextPart, newPropDesc)\n        // the newly created container will be the next target\n        nextTargetRef = containerRef\n      }\n      copyValueAtPath(\n        currentPath,\n        remainingParts,\n        explicitlyBanned,\n        nextSourceRef,\n        nextTargetRef\n      )\n      return\n    }\n\n    // If conflicting rules exist, opt for the negative one. This should never happen\n    if (explicitlyBanned.includes(currentPath)) {\n      console.warn(`LavaMoat - conflicting rules exist for \"${currentPath}\"`)\n      return\n    }\n\n    // this is the last part of the path, the value we're trying to actually copy\n    // if has getter/setter - apply this-value unwrapping\n    if (!('value' in sourcePropDesc)) {\n      // wrapper setter/getter with correct receiver\n      const wrapperPropDesc = applyGetSetPropDescTransforms(\n        sourcePropDesc,\n        unwrapFrom,\n        unwrapTo\n      )\n      Reflect.defineProperty(targetRef, nextPart, wrapperPropDesc)\n      return\n    }\n\n    // need to determine the value type in order to copy it with\n    // this-value unwrapping support\n    const { sourceValue, sourceWritable } = getSourceValue(sourcePropDesc)\n\n    // not a function - copy as is\n    if (typeof sourceValue !== 'function') {\n      Reflect.defineProperty(targetRef, nextPart, sourcePropDesc)\n      return\n    }\n    // otherwise add workaround for functions to swap back to the sourceal \"this\" reference\n    \n    const unwrapTest = (thisValue) => thisValue === unwrapFrom\n    const newValue = createFunctionWrapper(sourceValue, unwrapTest, unwrapTo)\n    const newPropDesc = {\n      value: newValue,\n      writable: sourceWritable,\n      enumerable: sourcePropDesc.enumerable,\n      configurable: sourcePropDesc.configurable,\n    }\n    Reflect.defineProperty(targetRef, nextPart, newPropDesc)\n\n    \n    function getSourceValue(sourcePropDesc) {\n      // determine the source value, this coerces getters to values\n      // im deeply sorry, respecting getters was complicated and\n      // my brain is not very good\n      let sourceValue, sourceWritable\n      if ('value' in sourcePropDesc) {\n        sourceValue = sourcePropDesc.value\n        sourceWritable = sourcePropDesc.writable\n      } else if ('get' in sourcePropDesc && sourcePropDesc.get) {\n        sourceValue = sourcePropDesc.get.call(unwrapTo)\n        sourceWritable = 'set' in sourcePropDesc\n      } else {\n        throw new Error(\n          'getEndowmentsForConfig - property descriptor missing a getter'\n        )\n      }\n      return { sourceValue, sourceWritable }\n    }\n  }\n\n  \n  function applyEndowmentPropDescTransforms(\n    propDesc,\n    unwrapFromCompartmentGlobalThis,\n    unwrapToGlobalThis\n  ) {\n    let newPropDesc = propDesc\n    newPropDesc = applyFunctionPropDescTransform(\n      newPropDesc,\n      unwrapFromCompartmentGlobalThis,\n      unwrapToGlobalThis\n    )\n    newPropDesc = applyGetSetPropDescTransforms(\n      newPropDesc,\n      unwrapFromCompartmentGlobalThis,\n      unwrapToGlobalThis\n    )\n    return newPropDesc\n  }\n\n  \n  function applyGetSetPropDescTransforms(\n    sourcePropDesc,\n    unwrapFromGlobalThis,\n    unwrapToGlobalThis\n  ) {\n    const wrappedPropDesc = { ...sourcePropDesc }\n    if (sourcePropDesc.get) {\n      wrappedPropDesc.get = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const receiver = this\n        // replace the \"receiver\" value if it points to fake parent\n        const receiverRef =\n          receiver === unwrapFromGlobalThis ? unwrapToGlobalThis : receiver\n        // sometimes getters replace themselves with static properties, as seen wih the FireFox runtime\n        const result = Reflect.apply(\n           (\n            sourcePropDesc.get\n          ),\n          receiverRef,\n          []\n        )\n        if (typeof result === 'function') {\n          // functions must be wrapped to ensure a good this-value.\n          // lockdown causes some propDescs to go to value -> getter,\n          // eg \"Function.prototype.bind\". we need to wrap getter results\n          // as well in order to ensure they have their this-value wrapped correctly\n          // if this ends up being problematic we can maybe take advantage of lockdown's\n          // \"getter.originalValue\" property being available\n          return createFunctionWrapper(\n            result,\n            \n            (thisValue) => thisValue === unwrapFromGlobalThis,\n            unwrapToGlobalThis\n          )\n        } else {\n          return result\n        }\n      }\n    }\n    if (sourcePropDesc.set) {\n      wrappedPropDesc.set = function (value) {\n        // replace the \"receiver\" value if it points to fake parent\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const receiver = this\n        const receiverRef =\n          receiver === unwrapFromGlobalThis ? unwrapToGlobalThis : receiver\n        return Reflect.apply(\n           (sourcePropDesc.set),\n          receiverRef,\n          [value]\n        )\n      }\n    }\n    return wrappedPropDesc\n  }\n\n  \n  function applyFunctionPropDescTransform(\n    propDesc,\n    unwrapFromCompartmentGlobalThis,\n    unwrapToGlobalThis\n  ) {\n    if (!('value' in propDesc && typeof propDesc.value === 'function')) {\n      return propDesc\n    }\n    \n    const unwrapTest = (thisValue) => {\n      // unwrap function calls this-value to unwrapToGlobalThis when:\n      // this value is globalThis ex. globalThis.abc()\n      // scope proxy leak workaround ex. abc()\n      return thisValue === unwrapFromCompartmentGlobalThis\n    }\n    const newFn = createFunctionWrapper(\n      propDesc.value,\n      unwrapTest,\n      unwrapToGlobalThis\n    )\n    return { ...propDesc, value: newFn }\n  }\n\n  \n  function getPropertyDescriptorDeep(target, key) {\n    \n    let receiver = target\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      // abort if this is the end of the prototype chain.\n      if (!receiver) {\n        return { prop: null, receiver: null }\n      }\n      // support lookup on objects and primitives\n      const typeofReceiver = typeof receiver\n      if (typeofReceiver === 'object' || typeofReceiver === 'function') {\n        const prop = Reflect.getOwnPropertyDescriptor(receiver, key)\n        if (prop) {\n          return { receiver, prop }\n        }\n        // try next in the prototype chain\n        receiver = Reflect.getPrototypeOf(receiver)\n      } else {\n        // prototype lookup for primitives\n        // eslint-disable-next-line no-proto\n        receiver =  (receiver).__proto__\n      }\n    }\n  }\n\n  \n  function copyWrappedGlobals(\n    globalRef,\n    target,\n    globalThisRefs = ['globalThis']\n  ) {\n    // find the relevant endowment sources\n    const globalProtoChain = getPrototypeChain(globalRef)\n    // the index for the common prototypal ancestor, Object.prototype\n    // this should always be the last index, but we check just in case\n    const commonPrototypeIndex = globalProtoChain.findIndex(\n      (globalProtoChainEntry) => globalProtoChainEntry === Object.prototype\n    )\n    if (commonPrototypeIndex === -1) {\n      // TODO: fix this error message\n      throw new Error(\n        'Lavamoat - unable to find common prototype between Compartment and globalRef'\n      )\n    }\n    // we will copy endowments from all entries in the prototype chain, excluding Object.prototype\n    const endowmentSources = globalProtoChain.slice(0, commonPrototypeIndex)\n\n    // call all getters, in case of behavior change (such as with FireFox lazy getters)\n    // call on contents of endowmentsSources directly instead of in new array instances. If there is a lazy getter it only changes the original prop desc.\n    endowmentSources.forEach((source) => {\n      const descriptors = Object.getOwnPropertyDescriptors(source)\n      Object.values(descriptors).forEach((desc) => {\n        if ('get' in desc && desc.get) {\n          try {\n            // calling getters can potentially throw (e.g. localStorage inside a sandboxed iframe)\n            Reflect.apply(desc.get, globalRef, [])\n          } catch {}\n        }\n      })\n    })\n\n    const endowmentSourceDescriptors = endowmentSources.map(\n      (globalProtoChainEntry) =>\n        Object.getOwnPropertyDescriptors(globalProtoChainEntry)\n    )\n    // flatten propDesc collections with precedence for globalThis-end of the prototype chain\n    const endowmentDescriptorsFlat = Object.assign(\n      Object.create(null),\n      ...endowmentSourceDescriptors.reverse()\n    )\n    // expose all own properties of globalRef, including non-enumerable\n    Object.entries(endowmentDescriptorsFlat)\n      // ignore properties already defined on compartment global\n      .filter(([key]) => !(key in target))\n      // ignore circular globalThis refs\n      .filter(([key]) => !globalThisRefs.includes(key))\n      // define property on compartment global\n      .forEach(([key, desc]) => {\n        // unwrap functions, setters/getters & apply scope proxy workaround\n        const wrappedPropDesc = applyEndowmentPropDescTransforms(\n          desc,\n          target,\n          globalRef\n        )\n        Reflect.defineProperty(target, key, wrappedPropDesc)\n      })\n    // global circular references otherwise added by prepareCompartmentGlobalFromConfig\n    // Add all circular refs to root package compartment globalThis\n    for (const ref of globalThisRefs) {\n      if (ref in target) {\n        continue\n      }\n      target[ref] = target\n    }\n    return target\n  }\n\n  \n  function getPrototypeChain(value) {\n    const protoChain = []\n    let current = value\n    while (\n      current &&\n      (typeof current === 'object' || typeof current === 'function')\n    ) {\n      protoChain.push(current)\n      current = Reflect.getPrototypeOf(current)\n    }\n    return protoChain\n  }\n}\n\n\nfunction defaultCreateFunctionWrapper(sourceValue, unwrapTest, unwrapTo) {\n  \n  const newValue = function (...args) {\n    if (new.target) {\n      // handle constructor calls\n      return Reflect.construct(sourceValue, args, new.target)\n    } else {\n      // handle function calls\n      // unwrap to target value if this value is the source package compartment's globalThis\n      const thisRef = unwrapTest(this) ? unwrapTo : this\n      return Reflect.apply(sourceValue, thisRef, args)\n    }\n  }\n  Object.defineProperties(\n    newValue,\n    Object.getOwnPropertyDescriptors(sourceValue)\n  )\n  return newValue\n}\n\n\n\n        ;\n        LAVAMOAT['endowmentsToolkit'] = module.exports;\n      })();\n;/*runtime*/;\n/// <reference path=\"./runtime.d.ts\" />\n\n\n\nconst {\n  create,\n  freeze,\n  assign,\n  defineProperty,\n  defineProperties,\n  getOwnPropertyDescriptors,\n} = Object\nconst warn = typeof console === 'object' ? console.warn : () => {}\n// Avoid running any wrapped code or using compartment if lockdown was not called.\n// This is for when the bundle ends up running despite SES being missing.\n// It was previously useful for sub-compilations running an incomplete bundle as part of the build, but currently that is being skipped. We might go back to it for the sake of build time security if it's deemed worthwihile in absence of lockdown.\nconst LOCKDOWN_ON = typeof lockdown !== 'undefined'\nif (LOCKDOWN_ON) {\n  lockdown(LAVAMOAT.options.lockdown)\n} else {\n  warn(\n    'LavaMoat: runtime execution started without SES present, switching to no-op.'\n  )\n}\n\nconst { getEndowmentsForConfig, copyWrappedGlobals } =\n  LAVAMOAT.endowmentsToolkit()\n\n// These must match assumptions in the wrapper.js\n// sharedKeys are included in the runtime\n\nconst { NAME_globalThis, NAME_scopeTerminator, NAME_runtimeHandler } =\n  LAVAMOAT.ENUM\n\n// strictScopeTerminator from SES is not strict enough - `has` would only return true for globals\n// and here we want to prevent reaching into the scope where local variables from bundle runtime are available.\nconst stricterScopeTerminator = freeze(\n  new Proxy(\n    freeze(create(null)),\n    freeze({\n      // TODO: emulate a reference error in a getter.\n      has: freeze(() => true),\n    })\n  )\n)\n\n\nconst enforcePolicy = (requestedResourceId, referrerResourceId) => {\n  if (typeof requestedResourceId === 'undefined') {\n    throw Error(`Requested resource ID is undefined`)\n  }\n  requestedResourceId = '' + requestedResourceId\n  referrerResourceId = '' + referrerResourceId\n  // implicitly allow all for root and modules from the same package\n  if (\n    referrerResourceId === LAVAMOAT.root ||\n    requestedResourceId === referrerResourceId\n  ) {\n    return\n  }\n  const myPolicy = LAVAMOAT.policy.resources[referrerResourceId] || {}\n  // @ts-expect-error - missing details in policy type, see TODO in types.js\n  if (myPolicy.packages && myPolicy.packages[requestedResourceId]) {\n    return\n  }\n  throw Error(\n    `Policy does not allow importing ${requestedResourceId} from ${referrerResourceId}`\n  )\n}\n\nconst theRealGlobalThis = globalThis\n\nlet rootCompartmentGlobalThis\n\nconst installGlobalsForPolicy = (resourceId, packageCompartmentGlobal) => {\n  if (resourceId === LAVAMOAT.root) {\n    rootCompartmentGlobalThis = packageCompartmentGlobal\n    copyWrappedGlobals(theRealGlobalThis, rootCompartmentGlobalThis, [\n      'globalThis',\n      'window',\n      'self',\n    ])\n  } else {\n    // TODO: getEndowmentsForConfig doesn't implement support for \"write\"\n    const endowments = getEndowmentsForConfig(\n      rootCompartmentGlobalThis,\n      LAVAMOAT.policy.resources[resourceId] || {},\n      globalThis,\n      packageCompartmentGlobal\n    )\n\n    defineProperties(\n      packageCompartmentGlobal,\n      getOwnPropertyDescriptors(endowments)\n    )\n  }\n}\n\nconst compartmentMap = new Map()\n\nconst findResourceId = (moduleId) => {\n  const found = LAVAMOAT.idmap.find(([, moduleIds]) =>\n    moduleIds.includes(moduleId)\n  )\n  if (found) {\n    return found[0]\n  }\n}\n\n\n\n\nconst wrapRequireWithPolicy = (__webpack_require__, referrerResourceId) =>\n  function (specifier) {\n    if (!LAVAMOAT.unenforceable.includes(specifier)) {\n      const requestedResourceId = findResourceId(specifier)\n      enforcePolicy(requestedResourceId, referrerResourceId)\n    }\n    // @ts-ignore - unknown this is the point here\n    return __webpack_require__.apply(this, arguments)\n  }\n\n\nconst lavamoatRuntimeWrapper = (resourceId, runtimeKit) => {\n  if (!LOCKDOWN_ON) {\n    // Scope Terminator not being present in the output causes the wrapper closure to run a no-op instaed of the module body\n    return create(null)\n  }\n\n  if (!compartmentMap.has(resourceId)) {\n    // Endow original Math and Date, because SES tames them and we don't need that\n    const c = new Compartment({ Math, Date })\n    installGlobalsForPolicy(resourceId, c.globalThis)\n    compartmentMap.set(resourceId, c)\n  }\n\n  let overrides = create(null)\n\n  // modules may reference `require` dynamically, but that's something we don't want to allow\n  const { __webpack_require__ } = runtimeKit\n  let { module } = runtimeKit\n\n  if (__webpack_require__) {\n    // wrap webpack runtime for policy check and hardening\n    const policyRequire = wrapRequireWithPolicy(__webpack_require__, resourceId)\n\n    // TODO: figure out what to wrap and what to copy\n    // TODO: most of the work here could be done once instead of for each wrapping\n\n    // Webpack has built-in plugins that add more runtime functions. We might need to support them eventually.\n    // It's a case-by-case basis decision.\n    // TODO: print a warning for other functions on the __webpack_require__ namespace that we're not supporting.\n    //   It's probably best served at build time though - with runtimeRequirements or looking at the items in webpack runtime when adding lavamoat runtime.\n\n    // The following seem harmless and are used by default: ['O', 'n', 'd', 'o', 'r', 's']\n    const supportedRuntimeItems = ['O', 'n', 'd', 'o', 'r', 's']\n    for (const item of supportedRuntimeItems) {\n      // @ts-expect-error - I'm not gonna do webppack's minified runtime typing\n      policyRequire[item] = harden(__webpack_require__[item])\n    }\n\n    // TODO: check if this is not breaking anything\n    // @ts-expect-error - webpack runtime is not typed\n    policyRequire.m = new Proxy(\n      {},\n      {\n        has: (target, prop) => {\n          warn(\n            `A module attempted to read ${String(\n              prop\n            )} directly from webpack's module cache`\n          )\n          return false\n        },\n      }\n    )\n\n    // webpack rewrites regerences to `global` to `__webpack_require__.g` in the bundle\n    policyRequire.g = compartmentMap.get(resourceId).globalThis\n\n    // override nmd to limit what it can mutate\n    // @ts-expect-error - webpack runtime is not typed\n    policyRequire.nmd = (moduleReference) => {\n      if (moduleReference === module) {\n        module = __webpack_require__.nmd(module)\n      }\n    }\n\n    overrides.__webpack_require__ = policyRequire\n  }\n  const runtimeHandler = assign(create(null), runtimeKit, overrides)\n\n  // allow setting, but ignore value for  module = __webpack_require__.nmd(module)\n  defineProperty(runtimeHandler, 'module', {\n    get: () => module,\n    set: () => {},\n  })\n  // Make it possible to overwrite `exports` locally despite runtimeHandler being frozen\n  let exportsReference = runtimeHandler.exports\n  defineProperty(runtimeHandler, 'exports', {\n    get: () => exportsReference,\n    set: (value) => {\n      exportsReference = value\n    },\n  })\n  freeze(runtimeHandler)\n\n  return {\n    [NAME_scopeTerminator]: stricterScopeTerminator,\n    [NAME_runtimeHandler]: runtimeHandler,\n    [NAME_globalThis]: compartmentMap.get(resourceId).globalThis,\n  }\n}\n\n// defaultExport is getting assigned to __webpack_require__._LM_\nLAVAMOAT.defaultExport = freeze(lavamoatRuntimeWrapper)\n;\n  __webpack_require__._LM_ = LAVAMOAT.defaultExport;\n  (typeof harden !== 'undefined') && harden(__webpack_require__._LM_);","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import '../hardenpreact.js'; // replace with noop to disable hardening\n// import '../noop.js';\n\nimport { h, render } from 'preact';\nimport App from './App';\n\n// Render the App component into the div with id 'app'\nrender(<App />, document.getElementById('app'));"],"names":["broker","createBroker","options","domPowersBroker","CSS","domnode","style","get","INPUTS","value","set","globalThis","domPowers","prevVnode","vnode","prevEvent","event","debug","log","console","knownWrapped","WeakSet","wrapValueInBroker","original","key","target","has","deal","Object","defineProperty","configurable","add","diffed","_vnode$__","__","__c","props","dangerouslySetInnerHTML","ref","_typeof","e","type","Component","h","Domponent1","Domponent2","Domponent3","Misfeatures","_Component","_inherits","_classCallCheck","_callSuper","_createClass","componentDidMount","base","innerHTML","render","App","_Component2","_this","_defineProperty","_assertThisInitialized","setState","prevState","counter","state","onClick","handleButtonClick","id","defineProperties","create","freeze","assign","values","Proxy","WeakMap","_WeakMap$prototype","prototype","store","storeSet","bind","storeGet","power","createDeal","claim","mandateKeys","undefined","goods","i","length","attenuationFromMandate","availableMandates","mandate","enumerable","refuse","Error","apply","construct","document","getElementById"],"sourceRoot":""}